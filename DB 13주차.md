## Storage Hierarchy

저장 장치는 **volatile storage (휘발성 저장장치)** 와 **non-volatile storage (비휘발성 저장장치)** 로구분할 수 있다

- **휘발성 저장장치** : 전원이 꺼지면 내용이 사라진다 (ex: RAM)

- **비휘발성 저장장치** : 전원이 꺼져도 데이터를 유지하는 저장장치, 2차, 3차 저장장치뿐 아니라 배터리 백업된 주기억장치도 포함 (ex: SSD, HDD)

<br/>

### 저장 매체 선택에 영향을 주는 요인

- 데이터를 얼마나 빨리 접근할 수 있는가

- 데이터 단위당 비용

- 신뢰성

<br/>

![IMG_3367](https://github.com/user-attachments/assets/b229f2d2-aa04-4bc6-ad5d-888aae94f4d0)

<br/>

## Magnetic Hard Disk Mechanism (자기 하드디스크 구조)

![IMG_3368](https://github.com/user-attachments/assets/94575315-a727-4ea9-bed5-cedf69ba6ce2)


### 자기 하드디스크 구조에서 디스크 저장 방식

플래터 표면은 자성을 띤 물질로 코팅되어 있다

여기에 **자기장을 이용해 0과 1을 기록**함. 자기 방향이 ↗면 0, ↘면 1 처럼 약속되어 있다 

<br/>

파일, 사진, 동영상, 프로그램, 운영체제 등 컴퓨터의 모든 정보가 결국은 0과 1 (비트)로 바뀌어서 sector 단위로 디스크에 저장된다

<br/>

그래서 물리 디스크에 0과 1이 자성으로 새겨져서 전원을 꺼도 내용이 안 사라지는 원리이다 

<br/>

**모든 디스크가 다 자기장으로 이루어진 것은 아님**

대표적으로 **자기장을 이용하는 건 HDD**아고, SSD나 CD/DVD는 **전기 또는 빛을 이용**

<br/>

## Disk Controller

**Disk controller** : 컴퓨터 시스템과 디스크 드라이브 하드웨어 사이를 연결하는 장치

- 디스크 팔을 움직이고 데이터를 읽고 쓰는 명령을 수행한다 즉, CPU가 해당 위치 읽으라고 하면 실질적인 동작은 컨트롤러가 수행

- 데이터가 손상되었는지 확인하기 위해 **checksums**을 계산하여 붙임

- **손상된 섹터가 있으면 다른 위치**로 논리적으로 연결해줌

<br/>

## 디스크 평가 방식

### Access time

- read-write 요청 후 실제 전송이 시작되기까지 걸리는 시간

<br/>

### Seek time

- 헤드를 원하는 트랙으로 옮기는 데 걸리는 시간

- 평균 탐색 시간 = 최악의 경우의 절반

- 일반적으로 4~10ms

<br/>

### Rotational latency

- sector가 회전하여 헤드 아래 올 때까지 기다리는 시간

- 회전속도에 따라 달라짐 (5400~15000rpm), 평균은 절반 시간

- 일반적으로 4~11ms

<br/>

**전체 평균 지연 시간 = 5m~ 20ms**

<br/>

### Data-transfer rate

- 데이터를 얼마나 빠르게 읽고 쓸 수 있는가

- 초당 25~200MB 가능 (트랙 위치에 따라 다름, 바깥쪽이 빠름)

<br/>

### Mean time to failure (MTTF)

- 디스크가 고장 없이 계속 작동할 것으로 예상되는 평균 시간

- ex: 1,200,000시간 MTTF → 1000개의 디스크 중 평균적으로 1200시간마다 1개 고장난다는 의미 

<br/>

## Flash Storage (플래시 저장장치)

Flash Storage에서 NAND flash와 SSD에 대해 알아보자 

### NAND flash

- 저장용으로 널리 사용되며, NOR 플래시보다 저렴하다

- 데이터를 한 번에 '페이지 단위(512B ~ 4KB)'로 읽어야 함

- 한 페이지를 읽는 데 약 20~100마이크로초가 걸린다

- 한 페이지는 한 번만 쓸 수 있다

<br/>

### Solid state disks (SSD)

- 표준 블록 단위 디스크 인터페이스(SATA 등)를 사용하지만, 내부적으로는 여러 개의 플래시 메모리 장치에 데이터를 저장함

-  SATA 인터페이스로는 최대 500MB/s, NVMe PCIe 인터페이스로는 최대 3GB/s의 전송 속도를 제공

<br/>

## RAID (Redundant Arrays of Independent Disks)

- **RAID** : 많은 디스크를 관리하면서 하나의 디스크처럼 보이게 하는 저장 구성 기법

- 여러 디스크를 병렬로 사용해 **high capacity (높은 용량)** 과 **high speed (높은 속도) 제공**

<br/>

### RAID -> Redundancy (중복 저장) - 안정성 향상

- RAID는 중복 저장을 하여 안정성을 향상시킨다

- 즉, 디스크 손실 시 복구에 사용할 수 있는 추가 정보를 저장하는 것

- ex : Mirroring (or shadowing) : 모든 디스크를 복제함

<br/>

논리 디스크는 물리적으로 두 개의 디스크로 구성됨

- write는 항상 두 디스크에 동시에 기록

- read는 둘 중 아무 디스크에서나 가능

- 한 디스크가 고장 나도 나머지에 데이터가 있다

<br/>

따라서 기존 디스크와 미러 디스크가 **둘 다 고장 나기 전까지는 데이터 손실이 없음**



















































